var dBControl=function(){function m(a,b){var c=b||{};c.Name=a;c.Type="localDB";c.Data=[];c.Created=h(new Date);c.LastTimeUsed=h(new Date);e.setItem(a,JSON.stringify(c));console.info("LocalDB '"+a+"' has been successfully created.")}function d(a){return 1==Boolean(a)}function g(a){return JSON.parse(e.getItem(a))||null}function l(a){if(0==Boolean(a))b.LastTimeUsed=h(new Date),e.setItem(b.Name,JSON.stringify(b));else{a.LastTimeUsed=h(new Date);e.setItem(b.Name,JSON.stringify(a));for(var k in a)a.hasOwnProperty(k)&&
(b[k]=a[k])}}function h(a){var b=a.getFullYear().toString(),c=(a.getMonth()+1).toString(),e=a.getDate().toString(),d=a.getHours().toString(),f=a.getMinutes().toString();a=a.getSeconds().toString();b=[b,c[1]?c:"0"+c[0],e[1]?e:"0"+e[0]].join("-");d=[d[1]?d:"0"+d[0],f[1]?f:"0"+f[0],a[1]?a:"0"+a[0]].join(":");return b.concat(" ",d)}var e=localStorage,f,b;this.constructor=void 0;this.clear=function(){if(d(g(b.Name))){var a=b;a.Data=[];a.LastTimeUsed=h(new Date);l();f.Cleared()}else f.NotFound(b.Name)};
this.connect=function(a){d(g(a))?(b=JSON.parse(e.getItem(a)),console.info("Connection has been established with success. Your current LocalDB is  "+b.Name+"' .")):f.NotFound(a)};this.create=function(a,b){d(g(a))?d(b)?m(a,null):console.warn('LocalDB with specified Name is already exists. Use .create("Title", true) syntax to avoid that.'):m(a,null)};this.disconnect=function(){d(g(b.Name))?(b.Data=[],b.DisplayMessages=!0,b.Name=null,f.Disconnected()):f.NotConnected()};this.displayMessages=function(a){b.DisplayMessages=
a};this.drop=function(a){d(g(a))?(e.removeItem(a),console.info("LocalDB  "+a+"' has been completely removed from the storage.")):f.NotFound(a)};this.find=g;this.getAll=function(){for(var a=[],b=e.length,c,d=0;d<b;d++)c=JSON.parse(e.getItem(e.key(d))),c.hasOwnProperty("Type")&&"localDB"==c.Type&&a.push(c);return 0<a.length?a:null};this.getData=function(){return d(b.Name)?b.Data:null};this.getInfo=function(){return d(b.Name)?b:f.NotConnected()};this.removeValue=function(a){d(b.Name)&&(b.Data.forEach(function(d,
c){d.Name==a&&b.Data.splice(c,1)}),l())};this.setValue=function(a,f){var c,g;d(b)&&(c=JSON.parse(e.getItem(b.Name)),g=c.Data.some(function(b){return b.Name==a}),0==Boolean(g)&&c.Data.push({Name:a,Value:f}),l(c))};b={Data:[],DisplayMessages:!0,Name:null,Type:null,Created:null,LastTimeUsed:null};f={Cleared:function(){b.DisplayMessages&&console.info("LocalDB has been cleared and ready to insert new values.")},Disconnected:function(){b.DisplayMessages&&console.info("You have been successfully disconnected.")},
NotConnected:function(){b.DisplayMessages&&console.error("You don't have connection wih any LocalDB. Use .connect method to start work.")},NotFound:function(a){b.DisplayMessages&&console.warn("LocalDB with name '"+a+"' doesn't exist. Use .create method to make a new LocalDB.")}}};
